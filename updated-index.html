<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SOSit - Emergency Navigation</title>
  <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.18.0/maps/maps-web.min.js"></script>
  <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.18.0/services/services-web.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <link rel="stylesheet" href="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.18.0/maps/maps.css"/>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f4;
      color: #111;
      transition: background-color 0.3s, color 0.3s;
      position: relative;
      min-height: 100vh;
    }
    .dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }
    header {
      background-color: #d32f2f;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
    }
    #sidebar-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: #d32f2f;
      color: white;
      border: none;
      padding: 10px 14px;
      border-radius: 5px;
      cursor: pointer;
    }
    #sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 290px;
      height: 100%;
      overflow-y: auto;
      background-color: #fff;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      z-index: 999;
    }
    .dark-mode #sidebar {
      background-color: #1e1e1e;
    }
    #sidebar.open {
      transform: translateX(0);
    }
    #sidebar h3 {
      margin-top: 0;
      font-size: 20px;
    }
    #quick-sos {
      position: fixed;
      bottom: 5px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1002;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      font-size: 1.5em;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: blink 1.5s infinite;
      border: 5px solid transparent;
    }
    #quick-sos::after {
      content: '';
      position: fixed;
      bottom: -150px;
      left: 50%;
      transform: translateX(-50%);
      width: 200vw;
      height: 150px;
      border-radius: 50%;
      background-image: radial-gradient(circle, rgba(255, 0, 0, 0.5) 0%, rgba(255, 0, 0, 0) 70%);
      animation: glowing-background 2s infinite;
      z-index: 1001;
      box-shadow: 0 0 30px #d32f2f;
    }
    #controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 15px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      font-size: 15px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      background-color: #d32f2f;
      color: white;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #b71c1c;
    }
    #map-container {
      padding: 20px;
    }
    #map {
      width: 100%;
      height: 80vh;
      border-radius: 10px;
      border: 2px solid #ccc;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .sos-box {
      background-color: #d32f2f;
      color: white;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      cursor: pointer;
    }
    .sos-box input[type="checkbox"] {
      transform: scale(1.2);
      cursor: pointer;
    }
    .sos-box select {
      flex-grow: 1;
      padding: 5px;
      border-radius: 5px;
      border: none;
      background-color: rgba(255, 255, 255, 0.2);
      color: white;
    }
    .sos-box select option {
      background-color: #d32f2f;
      color: white;
    }
    .sidebar-footer {
      margin-top: 330px;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      position: relative;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    .dark-mode .modal-content {
      background-color: #1e1e1e;
      color: white;
    }
    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      font-weight: bold;
      color: #d32f2f;
      cursor: pointer;
    }
    .modal-content label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    .modal-content input,
    .modal-content textarea {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .modal-content button {
      background-color: #388e3c;
      width: 100%;
      margin-top: 15px;
    }
    .modal-content button:hover {
      background-color: #2e7d32;
    }
    #saved-message {
      text-align: center;
      color: green;
      font-size: 14px;
      margin-top: 10px;
    }
    @keyframes blink {
      0% { background-color: #d32f2f; }
      50% { background-color: #1E88E5; }
      100% { background-color: #d32f2f; }
    }
    @keyframes glowing-background {
      0% {
        background-image: radial-gradient(circle, rgba(211, 47, 47, 0.6) 0%, rgba(211, 47, 47, 0) 70%);
        box-shadow: 0 0 30px #d32f2f;
      }
      50% {
        background-image: radial-gradient(circle, rgba(30, 136, 229, 0.6) 0%, rgba(30, 136, 229, 0) 70%);
        box-shadow: 0 0 30px #1E88E5;
      }
      100% {
        background-image: radial-gradient(circle, rgba(211, 47, 47, 0.6) 0%, rgba(211, 47, 47, 0) 70%);
        box-shadow: 0 0 30px #d32f2f;
      }
    }
  </style>
</head>
<body>
  <button id="sidebar-toggle">‚ò∞</button>
  <div id="sidebar">
    <h3>
      „Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§
    </h3>
    <div class="sos-box">
      <label for="languageSelect">üåê Language:</label>
      <select id="languageSelect">
        <option value="en">English</option>
        <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
        <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
        <option value="es">Espa√±ol (Spanish)</option>
        <option value="fr">Fran√ßais (French)</option>
        <option value="de">Deutsch (German)</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
        <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
        <option value="zh">‰∏≠Êñá (Chinese)</option>
      </select>
    </div>
    <label class="sos-box">
      <input type="checkbox" id="voiceToggle" /> üéôÔ∏è Voice SOS
    </label>
    <div class="sos-box" id="medicalBtn">üß© Medical Info</div>
    <div class="sos-box" id="safeMeBtn">üìç Safe Me</div>
    <div class="sos-box" id="whatsappShareBtn">üü¢ Share My Location</div>
    <div class="sidebar-footer">
      <label class="sos-box">
        <input type="checkbox" id="themeToggle" /> üåó Toggle Theme
      </label>
    </div>
  </div>
  <header id="appHeader">SOSit - Emergency Navigation</header>
  <div id="controls">
    <button id="hospitalBtn" onclick="searchNearby('hospital')">üè• Find Hospitals</button>
    <button id="policeBtn" onclick="searchNearby('police station')">üöì Find Police Stations</button>
    <button id="fireBtn" onclick="searchNearby('fire station')">üî• Find Fire Stations</button>
  </div>
  <div id="map-container">
    <div id="map"></div>
  </div>
  <button id="quick-sos">üö®</button>

  <div id="contactsModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeContactsModal">√ó</span>
      <h3 id="contactsModalTitle">üìû Emergency Contacts</h3>
      <form id="contactsForm">
        <label for="contact1Name">Contact 1 Name:</label>
        <input type="text" id="contact1Name">
        <label for="contact1Email">Contact 1 Email:</label>
        <input type="email" id="contact1Email">

        <label for="contact2Name" style="margin-top: 15px;">Contact 2 Name:</label>
        <input type="text" id="contact2Name">
        <label for="contact2Email">Contact 2 Email:</label>
        <input type="email" id="contact2Email">

        <button type="submit" id="saveContactsBtn">üíæ Save Contacts</button>
        <div id="contacts-saved-message"></div>
      </form>
    </div>
  </div>

  <div id="medicalModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">√ó</span>
      <h3 id="medicalModalTitle">üß© Medical ID / Emergency Info</h3>
      <form id="medicalForm">
        <label for="fullName" data-i18n="fullName">Full Name:</label>
        <input type="text" id="fullName" required>
        <label for="dob" data-i18n="dob">Date of Birth:</label>
        <input type="date" id="dob" required>
        <label for="bloodGroup" data-i18n="bloodGroup">Blood Group:</label>
        <input type="text" id="bloodGroup" required>
        <label for="allergies" data-i18n="allergies">Allergies:</label>
        <textarea id="allergies" rows="2"></textarea>
        <label for="medications" data-i18n="medications">Medications:</label>
        <textarea id="medications" rows="2"></textarea>
        <label for="conditions" data-i18n="conditions">Medical Conditions:</label>
        <textarea id="conditions" rows="2"></textarea>
        <label for="emergencyContact" data-i18n="emergencyContact">Emergency Contact:</label>
        <textarea id="emergencyContact" rows="2" required></textarea>
        <button type="submit" id="saveMedicalBtn">üíæ Save Info</button>
        <div id="saved-message"></div>
      </form>
    </div>
  </div>
  <div id="sosOptionsModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeSosModal">√ó</span>
      <h3 id="sosModalTitle">üö® Choose Emergency Service</h3>
      <button onclick="handleEmergency('Police', '100')" data-i18n="policeService">üöì Police</button>
      <button onclick="handleEmergency('Ambulance', '102')" data-i18n="ambulanceService">üöë Ambulance</button>
      <button onclick="handleEmergency('Fire Brigade', '101')" data-i18n="fireService">üî• Fire Brigade</button>
    </div>
  </div>
  <script>
    const apiKey = '9UgRJVBruTzjmNeO6gZrSB2loxP9ogDG';
    let map, userLocation, routeLayer;
    let poiMarkers = [];

    const safeMeBtn = document.getElementById("safeMeBtn");
    const contactsModal = document.getElementById("contactsModal");
    const closeContactsModal = document.getElementById("closeContactsModal");
    const contactsForm = document.getElementById("contactsForm");
    const contactsSavedMessage = document.getElementById("contacts-saved-message");

    let safeMeIntervalId;
    let isSafeMeActive = false;

    // Translations for different languages
    const translations = {
      en: {
        appHeader: "SOSit - Emergency Navigation",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è Voice SOS",
        medicalInfo: "üß© Medical Info",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó Toggle Theme",
        findHospitals: "üè• Find Hospitals",
        findPoliceStations: "üöì Find Police Stations",
        findFireStations: "üî• Find Fire Stations",
        locationNotAvailable: "Unable to retrieve your location. Please enable location services.",
        calling: "Calling",
        infoSaved: "Medical info saved!",
        contactsModalTitle: "üìû Emergency Contacts",
        contactsSaved: "Emergency contacts saved!",
        safeMeActivated: "'Safe Me' activated! Your location will be sent periodically.",
        safeMeDeactivated: "'Safe Me' deactivated.",
        fullName: "Full Name:",
        dob: "Date of Birth:",
        bloodGroup: "Blood Group:",
        allergies: "Allergies:",
        medications: "Medications:",
        conditions: "Medical Conditions:",
        emergencyContact: "Emergency Contact:",
        saveInfo: "üíæ Save Info",
        sosModalTitle: "üö® Choose Emergency Service",
        policeService: "üöì Police",
        ambulanceService: "üöë Ambulance",
        fireService: "üî• Fire Brigade",
        contact1Name: "Contact 1 Name:",
        contact1Email: "Contact 1 Email:",
        contact2Name: "Contact 2 Name:",
        contact2Email: "Contact 2 Email:",
        saveContacts: "üíæ Save Contacts",
        whatsappShare: "üü¢ Share My Location"
      },
      pa: {
        appHeader: "SOSit - ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®®‡©à‡®µ‡©Ä‡®ó‡©á‡®∏‡®º‡®®",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è ‡®µ‡©å‡®á‡®∏ SOS",
        medicalInfo: "üß© ‡®Æ‡©à‡®°‡©Ä‡®ï‡®≤ ‡®ú‡®æ‡®£‡®ï‡®æ‡®∞‡©Ä",
        safeMe: "üìç ‡®∏‡©á‡®´ ‡®Æ‡©Ä",
        toggleTheme: "üåó ‡®•‡©Ä‡®Æ ‡®¨‡®¶‡®≤‡©ã",
        findHospitals: "üè• ‡®π‡®∏‡®™‡®§‡®æ‡®≤ ‡®≤‡©±‡®≠‡©ã",
        findPoliceStations: "üöì ‡®™‡©Å‡®≤‡®ø‡®∏ ‡®∏‡®ü‡©á‡®∏‡®º‡®® ‡®≤‡©±‡®≠‡©ã",
        findFireStations: "üî• ‡®´‡®æ‡®á‡®∞ ‡®∏‡®ü‡©á‡®∏‡®º‡®® ‡®≤‡©±‡®≠‡©ã",
        locationNotAvailable: "‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®ü‡®ø‡®ï‡®æ‡®£‡®æ ‡®®‡®π‡©Ä‡®Ç ‡®≤‡©±‡®≠‡®ø‡®Ü ‡®ú‡®æ ‡®∏‡®ï‡®¶‡®æ‡•§ ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®ü‡®ø‡®ï‡®æ‡®£‡®æ ‡®∏‡©á‡®µ‡®æ‡®µ‡®æ‡®Ç ‡®ö‡®æ‡®≤‡©Ç ‡®ï‡®∞‡©ã‡•§",
        calling: "‡®ï‡®æ‡®≤ ‡®ï‡©Ä‡®§‡©Ä ‡®ú‡®æ ‡®∞‡®π‡©Ä ‡®π‡©à",
        infoSaved: "‡®Æ‡©à‡®°‡©Ä‡®ï‡®≤ ‡®ú‡®æ‡®£‡®ï‡®æ‡®∞‡©Ä ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡©Ä‡®§‡©Ä ‡®ó‡®à!",
        contactsModalTitle: "üìû ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®∏‡©∞‡®™‡®∞‡®ï",
        contactsSaved: "‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®∏‡©∞‡®™‡®∞‡®ï ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡©Ä‡®§‡©á ‡®ó‡®è!",
        safeMeActivated: "'‡®∏‡©á‡®´ ‡®Æ‡©Ä' ‡®ö‡®æ‡®≤‡©Ç ‡®π‡©ã ‡®ó‡®ø‡®Ü! ‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®ü‡®ø‡®ï‡®æ‡®£‡®æ ‡®∏‡®Æ‡©á‡®Ç-‡®∏‡®Æ‡©á‡®Ç '‡®§‡©á ‡®≠‡©á‡®ú‡®ø‡®Ü ‡®ú‡®æ‡®µ‡©á‡®ó‡®æ‡•§",
        safeMeDeactivated: "'‡®∏‡©á‡®´ ‡®Æ‡©Ä' ‡®¨‡©∞‡®¶ ‡®π‡©ã ‡®ó‡®ø‡®Ü‡•§",
        fullName: "‡®™‡©Ç‡®∞‡®æ ‡®®‡®æ‡®Æ:",
        dob: "‡®ú‡®®‡®Æ ‡®Æ‡®ø‡®§‡©Ä:",
        bloodGroup: "‡®ñ‡©Ç‡®® ‡®ó‡®∞‡©Å‡©±‡®™:",
        allergies: "‡®ê‡®≤‡®∞‡®ú‡©Ä:",
        medications: "‡®¶‡®µ‡®æ‡®à‡®Ü‡®Ç:",
        conditions: "‡®Æ‡©à‡®°‡©Ä‡®ï‡®≤ ‡®∏‡®•‡®ø‡®§‡©Ä‡®Ü‡®Ç:",
        emergencyContact: "‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®∏‡©∞‡®™‡®∞‡®ï:",
        saveInfo: "üíæ ‡®ú‡®æ‡®£‡®ï‡®æ‡®∞‡©Ä ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡®∞‡©ã",
        sosModalTitle: "üö® ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®∏‡©á‡®µ‡®æ ‡®ö‡©Å‡®£‡©ã",
        policeService: "üöì ‡®™‡©Å‡®≤‡®ø‡®∏",
        ambulanceService: "üöë ‡®ê‡®Ç‡®¨‡©Ç‡®≤‡©à‡®Ç‡®∏",
        fireService: "üî• ‡®´‡®æ‡®á‡®∞ ‡®¨‡©ç‡®∞‡®ø‡®ó‡©á‡®°",
        contact1Name: "‡®∏‡©∞‡®™‡®∞‡®ï 1 ‡®®‡®æ‡®Æ:",
        contact1Email: "‡®∏‡©∞‡®™‡®∞‡®ï 1 ‡®à‡®Æ‡©á‡®≤:",
        contact2Name: "‡®∏‡©∞‡®™‡®∞‡®ï 2 ‡®®‡®æ‡®Æ:",
        contact2Email: "‡®∏‡©∞‡®™‡®∞‡®ï 2 ‡®à‡®Æ‡©á‡®≤:",
        saveContacts: "üíæ ‡®∏‡©∞‡®™‡®∞‡®ï ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡®∞‡©ã",
        whatsappShare: "üü¢ ‡®Ü‡®™‡®£‡®æ ‡®ü‡®ø‡®ï‡®æ‡®£‡®æ ‡®∏‡®æ‡®Ç‡®ù‡®æ ‡®ï‡®∞‡©ã"
      },
      hi: {
        appHeader: "SOSit - ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§®",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è ‡§µ‡•â‡§Ø‡§∏ ‡§è‡§∏‡§ì‡§è‡§∏",
        medicalInfo: "üß© ‡§Æ‡•á‡§°‡§ø‡§ï‡§≤ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
        safeMe: "üìç ‡§∏‡•á‡§´ ‡§Æ‡•Ä",
        toggleTheme: "üåó ‡§•‡•Ä‡§Æ ‡§¨‡§¶‡§≤‡•á‡§Ç",
        findHospitals: "üè• ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç",
        findPoliceStations: "üöì ‡§™‡•Å‡§≤‡§ø‡§∏ ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç",
        findFireStations: "üî• ‡§´‡§æ‡§Ø‡§∞ ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç",
        locationNotAvailable: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡§Æ‡§∞‡•ç‡§•‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§",
        calling: "‡§ï‡•â‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à",
        infoSaved: "‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡•á‡§ú‡•Ä ‡§ó‡§à!",
        contactsModalTitle: "üìû ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï",
        contactsSaved: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§π‡•á‡§ú‡•á ‡§ó‡§è!",
        safeMeActivated: "'‡§∏‡•á‡§´ ‡§Æ‡•Ä' ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•ã ‡§ó‡§Ø‡§æ! ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡§Æ‡§Ø-‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§≠‡•á‡§ú‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§",
        safeMeDeactivated: "'‡§∏‡•á‡§´ ‡§Æ‡•Ä' ‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§",
        fullName: "‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ:",
        dob: "‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø:",
        bloodGroup: "‡§¨‡•ç‡§≤‡§° ‡§ó‡•ç‡§∞‡•Å‡§™:",
        allergies: "‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä:",
        medications: "‡§¶‡§µ‡§æ‡§è‡§Ç:",
        conditions: "‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç:",
        emergencyContact: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï:",
        saveInfo: "üíæ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡•á‡§ú‡•á‡§Ç",
        sosModalTitle: "üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•á‡§µ‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
        policeService: "üöì ‡§™‡•Å‡§≤‡§ø‡§∏",
        ambulanceService: "üöë ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏",
        fireService: "üî• ‡§´‡§æ‡§Ø‡§∞ ‡§¨‡•ç‡§∞‡§ø‡§ó‡•á‡§°",
        contact1Name: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï 1 ‡§®‡§æ‡§Æ:",
        contact1Email: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï 1 ‡§à‡§Æ‡•á‡§≤:",
        contact2Name: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï 2 ‡§®‡§æ‡§Æ:",
        contact2Email: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï 2 ‡§à‡§Æ‡•á‡§≤:",
        saveContacts: "üíæ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§π‡•á‡§ú‡•á‡§Ç",
        whatsappShare: "üü¢ ‡§Æ‡•á‡§∞‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç"
      },
      bn: {
        appHeader: "SOSit - ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶®",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è ‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶è‡¶∏‡¶ì‡¶è‡¶∏",
        medicalInfo: "üß© ‡¶Æ‡ßá‡¶°‡¶ø‡¶ï‡ßá‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø",
        safeMe: "üìç ‡¶∏‡ßá‡¶´ ‡¶Æ‡¶ø",
        toggleTheme: "üåó ‡¶•‡¶ø‡¶Æ ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®",
        findHospitals: "üè• ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®",
        findPoliceStations: "üöì ‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂ ‡¶∏‡ßç‡¶ü‡ßá‡¶∂‡¶® ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®",
        findFireStations: "üî• ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶∂‡¶® ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®",
        locationNotAvailable: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ö‡¶ï‡ßç‡¶∑‡¶Æ‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶™‡¶∞‡¶ø‡¶∑‡ßá‡¶¨‡¶æ‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶∏‡¶ï‡ßç‡¶∑‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
        calling: "‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá",
        infoSaved: "‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
        contactsModalTitle: "üìû ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó",
        contactsSaved: "‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
        safeMeActivated: "'‡¶∏‡ßá‡¶´ ‡¶Æ‡¶ø' ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶ï‡ßç‡¶∞‡¶Æ‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§",
        safeMeDeactivated: "'‡¶∏‡ßá‡¶´ ‡¶Æ‡¶ø' ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§",
        fullName: "‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ:",
        dob: "‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:",
        bloodGroup: "‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™:",
        allergies: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ú‡¶ø:",
        medications: "‡¶ì‡¶∑‡ßÅ‡¶ß:",
        conditions: "‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ:",
        emergencyContact: "‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó:",
        saveInfo: "üíæ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®",
        sosModalTitle: "üö® ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶™‡¶∞‡¶ø‡¶∑‡ßá‡¶¨‡¶æ ‡¶ö‡¶Ø‡¶º‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®",
        policeService: "üöì ‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂",
        ambulanceService: "üöë ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡ßÅ‡¶≤‡ßá‡¶®‡ßç‡¶∏",
        fireService: "üî• ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶ø‡¶ó‡ßá‡¶°",
        contact1Name: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó 1 ‡¶®‡¶æ‡¶Æ:",
        contact1Email: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó 1 ‡¶á‡¶Æ‡ßá‡¶≤:",
        contact2Name: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó 2 ‡¶®‡¶æ‡¶Æ:",
        contact2Email: "‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó 2 ‡¶á‡¶Æ‡ßá‡¶≤:",
        saveContacts: "üíæ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®",
        whatsappShare: "üü¢ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®"
      },
      ta: {
        appHeader: "SOSit - ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æµ‡Æ¥‡Æø‡Æö‡ØÜ‡Æ≤‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≤‡Øç",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è ‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øç SOS",
        medicalInfo: "üß© ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ§‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç",
        safeMe: "üìç ‡Æö‡Øá‡ÆÉ‡Æ™‡Øç ‡ÆÆ‡ØÄ",
        toggleTheme: "üåó ‡Æ§‡ØÄ‡ÆÆ‡Øç ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ",
        findHospitals: "üè• ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡ÆÆ‡Æ©‡Øà‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø",
        findPoliceStations: "üöì ‡Æï‡Ææ‡Æµ‡Æ≤‡Øç ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø",
        findFireStations: "üî• ‡Æ§‡ØÄ‡ÆØ‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø",
        locationNotAvailable: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Æö‡Øç ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øà ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
        calling: "‡ÆÖ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡ØÅ",
        infoSaved: "‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ§‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ!",
        contactsModalTitle: "üìû ‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
        contactsSaved: "‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ©!",
        safeMeActivated: "'‡Æö‡Øá‡ÆÉ‡Æ™‡Øç ‡ÆÆ‡ØÄ' ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ÆÆ‡Øç ‡ÆÖ‡Æµ‡Øç‡Æµ‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç.",
        safeMeDeactivated: "'‡Æö‡Øá‡ÆÉ‡Æ™‡Øç ‡ÆÆ‡ØÄ' ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Æø‡Æ¥‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.",
        fullName: "‡ÆÆ‡ØÅ‡Æ¥‡ØÅ ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç:",
        dob: "‡Æ™‡Æø‡Æ±‡Æ®‡Øç‡Æ§ ‡Æ§‡Øá‡Æ§‡Æø:",
        bloodGroup: "‡Æá‡Æ∞‡Æ§‡Øç‡Æ§ ‡Æµ‡Æï‡Øà:",
        allergies: "‡Æí‡Æµ‡Øç‡Æµ‡Ææ‡ÆÆ‡Øà‡Æï‡Æ≥‡Øç:",
        medications: "‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ‡Æï‡Æ≥‡Øç:",
        conditions: "‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ ‡Æ®‡Æø‡Æ≤‡Øà‡Æï‡Æ≥‡Øç:",
        emergencyContact: "‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ:",
        saveInfo: "üíæ ‡Æ§‡Æï‡Æµ‡Æ≤‡Øà‡Æö‡Øç ‡Æö‡Øá‡ÆÆ‡Æø",
        sosModalTitle: "üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æö‡Øá‡Æµ‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ",
        policeService: "üöì ‡Æï‡Ææ‡Æµ‡Æ≤‡Øç ‡Æ§‡ØÅ‡Æ±‡Øà",
        ambulanceService: "üöë ‡ÆÜ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æ≤‡Æ©‡Øç‡Æ∏‡Øç",
        fireService: "üî• ‡Æ§‡ØÄ‡ÆØ‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ‡Æ™‡Øç ‡Æ™‡Æü‡Øà",
        contact1Name: "‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ 1 ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç:",
        contact1Email: "‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ 1 ‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç:",
        contact2Name: "‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ 2 ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç:",
        contact2Email: "‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ 2 ‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç:",
        saveContacts: "üíæ ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øà‡Æö‡Øç ‡Æö‡Øá‡ÆÆ‡Æø",
        whatsappShare: "üü¢ ‡Æé‡Æ©‡Æ§‡ØÅ ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ™‡Øç ‡Æ™‡Æï‡Æø‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç"
      },
      es: {
        appHeader: "SOSit - Navegaci√≥n de emergencia",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è SOS por voz",
        medicalInfo: "üß© Informaci√≥n m√©dica",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó Cambiar tema",
        findHospitals: "üè• Encontrar hospitales",
        findPoliceStations: "üöì Encontrar comisar√≠as",
        findFireStations: "üî• Encontrar estaciones de bomberos",
        locationNotAvailable: "No se puede obtener su ubicaci√≥n. Por favor, habilite los servicios de ubicaci√≥n.",
        calling: "Llamando",
        infoSaved: "¬°Informaci√≥n m√©dica guardada!",
        contactsModalTitle: "üìû Contactos de emergencia",
        contactsSaved: "¬°Contactos de emergencia guardados!",
        safeMeActivated: "¬°'Safe Me' activado! Su ubicaci√≥n se enviar√° peri√≥dicamente.",
        safeMeDeactivated: "'Safe Me' desactivado.",
        fullName: "Nombre completo:",
        dob: "Fecha de nacimiento:",
        bloodGroup: "Grupo sangu√≠neo:",
        allergies: "Alergias:",
        medications: "Medicamentos:",
        conditions: "Condiciones m√©dicas:",
        emergencyContact: "Contacto de emergencia:",
        saveInfo: "üíæ Guardar info",
        sosModalTitle: "üö® Elegir servicio de emergencia",
        policeService: "üöì Polic√≠a",
        ambulanceService: "üöë Ambulancia",
        fireService: "üî• Bomberos",
        contact1Name: "Nombre de contacto 1:",
        contact1Email: "Correo electr√≥nico de contacto 1:",
        contact2Name: "Nombre de contacto 2:",
        contact2Email: "Correo electr√≥nico de contacto 2:",
        saveContacts: "üíæ Guardar contactos",
        whatsappShare: "üü¢ Compartir mi ubicaci√≥n"
      },
      fr: {
        appHeader: "SOSit - Navigation d'urgence",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è SOS vocal",
        medicalInfo: "üß© Infos m√©dicales",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó Basculer le th√®me",
        findHospitals: "üè• Trouver des h√¥pitaux",
        findPoliceStations: "üöì Trouver des postes de police",
        findFireStations: "üî• Trouver des casernes de pompiers",
        locationNotAvailable: "Impossible de r√©cup√©rer votre position. Veuillez activer les services de localisation.",
        calling: "Appel en cours",
        infoSaved: "Infos m√©dicales enregistr√©es!",
        contactsModalTitle: "üìû Contacts d'urgence",
        contactsSaved: "Contacts d'urgence enregistr√©s!",
        safeMeActivated: "'Safe Me' activ√© ! Votre position sera envoy√©e p√©riodiquement.",
        safeMeDeactivated: "'Safe Me' d√©sactiv√©.",
        fullName: "Nom complet:",
        dob: "Date de naissance:",
        bloodGroup: "Groupe sanguin:",
        allergies: "Allergies:",
        medications: "M√©dicaments:",
        conditions: "Conditions m√©dicales:",
        emergencyContact: "Contact d'urgence:",
        saveInfo: "üíæ Enregistrer",
        sosModalTitle: "üö® Choisir un service d'urgence",
        policeService: "üöì Police",
        ambulanceService: "üöë Ambulance",
        fireService: "üî• Pompiers",
        contact1Name: "Nom du contact 1:",
        contact1Email: "Email du contact 1:",
        contact2Name: "Nom du contact 2:",
        contact2Email: "Email du contact 2:",
        saveContacts: "üíæ Enregistrer les contacts",
        whatsappShare: "üü¢ Partager ma position"
      },
      de: {
        appHeader: "SOSit - Notfallnavigation",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è Sprach-SOS",
        medicalInfo: "üß© Medizinische Infos",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó Thema wechseln",
        findHospitals: "üè• Krankenh√§user finden",
        findPoliceStations: "üöì Polizeistationen finden",
        findFireStations: "üî• Feuerwachen finden",
        locationNotAvailable: "Standort konnte nicht abgerufen werden. Bitte aktivieren Sie die Standortdienste.",
        calling: "Anruf",
        infoSaved: "Medizinische Infos gespeichert!",
        contactsModalTitle: "üìû Notfallkontakte",
        contactsSaved: "Notfallkontakte gespeichert!",
        safeMeActivated: "'Safe Me' aktiviert! Ihr Standort wird regelm√§√üig gesendet.",
        safeMeDeactivated: "'Safe Me' deaktiviert.",
        fullName: "Vollst√§ndiger Name:",
        dob: "Geburtsdatum:",
        bloodGroup: "Blutgruppe:",
        allergies: "Allergien:",
        medications: "Medikamente:",
        conditions: "Medizinische Zust√§nde:",
        emergencyContact: "Notfallkontakt:",
        saveInfo: "üíæ Infos speichern",
        sosModalTitle: "üö® Notdienst ausw√§hlen",
        policeService: "üöì Polizei",
        ambulanceService: "üöë Krankenwagen",
        fireService: "üî• Feuerwehr",
        contact1Name: "Kontakt 1 Name:",
        contact1Email: "Kontakt 1 E-Mail:",
        contact2Name: "Kontakt 2 Name:",
        contact2Email: "Kontakt 2 E-Mail:",
        saveContacts: "üíæ Kontakte speichern",
        whatsappShare: "üü¢ Meinen Standort teilen"
      },
      ru: {
        appHeader: "SOSit - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è –ì–æ–ª–æ—Å–æ–≤–æ–π SOS",
        medicalInfo: "üß© –ú–µ–¥. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É",
        findHospitals: "üè• –ù–∞–π—Ç–∏ –±–æ–ª—å–Ω–∏—Ü—ã",
        findPoliceStations: "üöì –ù–∞–π—Ç–∏ –ø–æ–ª–∏—Ü–∏—é",
        findFireStations: "üî• –ù–∞–π—Ç–∏ –ø–æ–∂–∞—Ä–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏",
        locationNotAvailable: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∫–ª—é—á–∏—Ç–µ —Å–ª—É–∂–±—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è.",
        calling: "–í—ã–∑–æ–≤",
        infoSaved: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!",
        contactsModalTitle: "üìû –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã",
        contactsSaved: "–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!",
        safeMeActivated: "¬´Safe Me¬ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏.",
        safeMeDeactivated: "¬´Safe Me¬ª –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.",
        fullName: "–ü–æ–ª–Ω–æ–µ –∏–º—è:",
        dob: "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:",
        bloodGroup: "–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏:",
        allergies: "–ê–ª–ª–µ—Ä–≥–∏–∏:",
        medications: "–õ–µ–∫–∞—Ä—Å—Ç–≤–∞:",
        conditions: "–ó–∞–±–æ–ª–µ–≤–∞–Ω–∏—è:",
        emergencyContact: "–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç:",
        saveInfo: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ",
        sosModalTitle: "üö® –í—ã–±–µ—Ä–∏—Ç–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É",
        policeService: "üöì –ü–æ–ª–∏—Ü–∏—è",
        ambulanceService: "üöë –°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å",
        fireService: "üî• –ü–æ–∂–∞—Ä–Ω–∞—è –±—Ä–∏–≥–∞–¥–∞",
        contact1Name: "–ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ 1:",
        contact1Email: "Email –∫–æ–Ω—Ç–∞–∫—Ç–∞ 1:",
        contact2Name: "–ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ 2:",
        contact2Email: "Email –∫–æ–Ω—Ç–∞–∫—Ç–∞ 2:",
        saveContacts: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã",
        whatsappShare: "üü¢ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –º–æ–∏–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º"
      },
      ar: {
        appHeader: "SOSit - ÿßŸÑŸÖŸÑÿßÿ≠ÿ© ŸÅŸä ÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è SOS ÿµŸàÿ™Ÿä",
        medicalInfo: "üß© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ∑ÿ®Ÿäÿ©",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÖÿ∏Ÿáÿ±",
        findHospitals: "üè• ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ≥ÿ™ÿ¥ŸÅŸäÿßÿ™",
        findPoliceStations: "üöì ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ±ÿßŸÉÿ≤ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©",
        findFireStations: "üî• ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ≠ÿ∑ÿßÿ™ ÿßŸÑÿ•ÿ∑ŸÅÿßÿ°",
        locationNotAvailable: "ÿ™ÿπÿ∞ÿ± ÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ŸÖŸàŸÇÿπŸÉ. Ÿäÿ±ÿ¨Ÿâ ÿ™ŸÅÿπŸäŸÑ ÿÆÿØŸÖÿßÿ™ ÿßŸÑŸÖŸàŸÇÿπ.",
        calling: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ",
        infoSaved: "ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ©!",
        contactsModalTitle: "üìû ÿ¨Ÿáÿßÿ™ ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶",
        contactsSaved: "ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ¨Ÿáÿßÿ™ ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶!",
        safeMeActivated: "ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ 'Safe Me'! ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÖŸàŸÇÿπŸÉ ÿ®ÿ¥ŸÉŸÑ ÿØŸàÿ±Ÿä.",
        safeMeDeactivated: "ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿ™ŸÅÿπŸäŸÑ 'Safe Me'.",
        fullName: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ:",
        dob: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸäŸÑÿßÿØ:",
        bloodGroup: "ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ:",
        allergies: "ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ©:",
        medications: "ÿßŸÑÿ£ÿØŸàŸäÿ©:",
        conditions: "ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ©:",
        emergencyContact: "ÿ¨Ÿáÿ© ÿßÿ™ÿµÿßŸÑ ŸÑŸÑÿ∑Ÿàÿßÿ±ÿ¶:",
        saveInfo: "üíæ ÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™",
        sosModalTitle: "üö® ÿßÿÆÿ™ÿ± ÿÆÿØŸÖÿ© ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶",
        policeService: "üöì ÿßŸÑÿ¥ÿ±ÿ∑ÿ©",
        ambulanceService: "üöë ÿßŸÑÿ•ÿ≥ÿπÿßŸÅ",
        fireService: "üî• ÿßŸÑÿ•ÿ∑ŸÅÿßÿ°",
        contact1Name: "ÿßÿ≥ŸÖ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ 1:",
        contact1Email: "ÿ®ÿ±ŸäÿØ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ 1:",
        contact2Name: "ÿßÿ≥ŸÖ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ 2:",
        contact2Email: "ÿ®ÿ±ŸäÿØ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ 2:",
        saveContacts: "üíæ ÿ≠ŸÅÿ∏ ÿ¨Ÿáÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ",
        whatsappShare: "üü¢ ÿ¥ÿßÿ±ŸÉ ŸÖŸàŸÇÿπŸä"
      },
      ja: {
        appHeader: "SOSit - Á∑äÊÄ•„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è Èü≥Â£∞SOS",
        medicalInfo: "üß© ÂåªÁôÇÊÉÖÂ†±",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà",
        findHospitals: "üè• ÁóÖÈô¢„ÇíÊé¢„Åô",
        findPoliceStations: "üöì Ë≠¶ÂØüÁΩ≤„ÇíÊé¢„Åô",
        findFireStations: "üî• Ê∂àÈò≤ÁΩ≤„ÇíÊé¢„Åô",
        locationNotAvailable: "‰ΩçÁΩÆÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„ÄÇ‰ΩçÁΩÆÊÉÖÂ†±„Çµ„Éº„Éì„Çπ„ÇíÊúâÂäπ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
        calling: "Áô∫‰ø°‰∏≠",
        infoSaved: "ÂåªÁôÇÊÉÖÂ†±„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
        contactsModalTitle: "üìû Á∑äÊÄ•ÈÄ£Áµ°ÂÖà",
        contactsSaved: "Á∑äÊÄ•ÈÄ£Áµ°ÂÖà„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
        safeMeActivated: "„ÄåSafe Me„Äç„ÅåÊúâÂäπ„Å´„Å™„Çä„Åæ„Åó„ÅüÔºÅ„ÅÇ„Å™„Åü„ÅÆ‰ΩçÁΩÆÊÉÖÂ†±„ÅØÂÆöÊúüÁöÑ„Å´ÈÄÅ‰ø°„Åï„Çå„Åæ„Åô„ÄÇ",
        safeMeDeactivated: "„ÄåSafe Me„Äç„ÅåÁÑ°Âäπ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ",
        fullName: "Ê∞èÂêç:",
        dob: "ÁîüÂπ¥ÊúàÊó•:",
        bloodGroup: "Ë°ÄÊ∂≤Âûã:",
        allergies: "„Ç¢„É¨„É´„ÇÆ„Éº:",
        medications: "ÊúçÁî®‰∏≠„ÅÆËñ¨:",
        conditions: "ÁóÖÁä∂:",
        emergencyContact: "Á∑äÊÄ•ÈÄ£Áµ°ÂÖà:",
        saveInfo: "üíæ ÊÉÖÂ†±„Çí‰øùÂ≠ò",
        sosModalTitle: "üö® Á∑äÊÄ•„Çµ„Éº„Éì„Çπ„ÇíÈÅ∏Êäû",
        policeService: "üöì Ë≠¶ÂØü",
        ambulanceService: "üöë ÊïëÊÄ•Ëªä",
        fireService: "üî• Ê∂àÈò≤ÁΩ≤",
        contact1Name: "ÈÄ£Áµ°ÂÖà1„ÅÆÂêçÂâç:",
        contact1Email: "ÈÄ£Áµ°ÂÖà1„ÅÆ„É°„Éº„É´:",
        contact2Name: "ÈÄ£Áµ°ÂÖà2„ÅÆÂêçÂâç:",
        contact2Email: "ÈÄ£Áµ°ÂÖà2„ÅÆ„É°„Éº„É´:",
        saveContacts: "üíæ ÈÄ£Áµ°ÂÖà„Çí‰øùÂ≠ò",
        whatsappShare: "üü¢ ÁèæÂú®Âú∞„ÇíÂÖ±Êúâ"
      },
      zh: {
        appHeader: "SOSit - Á¥ßÊÄ•ÂØºËà™",
        quickSos: "üö®",
        voiceSos: "üéôÔ∏è ËØ≠Èü≥SOS",
        medicalInfo: "üß© ÂåªÁñó‰ø°ÊÅØ",
        safeMe: "üìç Safe Me",
        toggleTheme: "üåó ÂàáÊç¢‰∏ªÈ¢ò",
        findHospitals: "üè• Êü•ÊâæÂåªÈô¢",
        findPoliceStations: "üöì Êü•ÊâæË≠¶ÂØüÂ±Ä",
        findFireStations: "üî• Êü•ÊâæÊ∂àÈò≤Â±Ä",
        locationNotAvailable: "Êó†Ê≥ïÊ£ÄÁ¥¢ÊÇ®ÁöÑ‰ΩçÁΩÆ„ÄÇËØ∑ÂêØÁî®‰ΩçÁΩÆÊúçÂä°„ÄÇ",
        calling: "Ê≠£Âú®ÂëºÂè´",
        infoSaved: "ÂåªÁñó‰ø°ÊÅØÂ∑≤‰øùÂ≠òÔºÅ",
        contactsModalTitle: "üìû Á¥ßÊÄ•ËÅîÁ≥ª‰∫∫",
        contactsSaved: "Á¥ßÊÄ•ËÅîÁ≥ª‰∫∫Â∑≤‰øùÂ≠òÔºÅ",
        safeMeActivated: "‚ÄúSafe Me‚ÄùÂ∑≤ÊøÄÊ¥ªÔºÅÊÇ®ÁöÑ‰ΩçÁΩÆÂ∞ÜÂÆöÊúüÂèëÈÄÅ„ÄÇ",
        safeMeDeactivated: "‚ÄúSafe Me‚ÄùÂ∑≤ÂÅúÁî®„ÄÇ",
        fullName: "ÂÖ®Âêç:",
        dob: "Âá∫ÁîüÊó•Êúü:",
        bloodGroup: "Ë°ÄÂûã:",
        allergies: "ËøáÊïè:",
        medications: "ËçØÁâ©:",
        conditions: "ÂåªÁñóÁä∂ÂÜµ:",
        emergencyContact: "Á¥ßÊÄ•ËÅîÁ≥ª‰∫∫:",
        saveInfo: "üíæ ‰øùÂ≠ò‰ø°ÊÅØ",
        sosModalTitle: "üö® ÈÄâÊã©Á¥ßÊÄ•ÊúçÂä°",
        policeService: "üöì Ë≠¶ÂØü",
        ambulanceService: "üöë ÊïëÊä§ËΩ¶",
        fireService: "üî• Ê∂àÈò≤Èòü",
        contact1Name: "ËÅîÁ≥ª‰∫∫1ÂßìÂêç:",
        contact1Email: "ËÅîÁ≥ª‰∫∫1ÈÇÆÁÆ±:",
        contact2Name: "ËÅîÁ≥ª‰∫∫2ÂßìÂêç:",
        contact2Email: "ËÅîÁ≥ª‰∫∫2ÈÇÆÁÆ±:",
        saveContacts: "üíæ ‰øùÂ≠òËÅîÁ≥ª‰∫∫",
        whatsappShare: "üü¢ ÂàÜ‰∫´ÊàëÁöÑ‰ΩçÁΩÆ"
      }
    };

    function setLanguage(lang) {
      const t = translations[lang];
      document.getElementById('appHeader').innerText = t.appHeader;
      document.getElementById('quick-sos').innerText = t.quickSos;
      document.getElementById('voiceToggle').parentElement.lastChild.nodeValue = ` ${t.voiceSos}`;
      document.getElementById('medicalBtn').innerText = t.medicalInfo;
      document.getElementById('safeMeBtn').innerText = t.safeMe;
      document.getElementById('whatsappShareBtn').innerText = t.whatsappShare; // Added WhatsApp button translation
      document.getElementById('themeToggle').parentElement.lastChild.nodeValue = ` ${t.toggleTheme}`;
      document.getElementById('hospitalBtn').innerText = t.findHospitals;
      document.getElementById('policeBtn').innerText = t.findPoliceStations;
      document.getElementById('fireBtn').innerText = t.findFireStations;

      document.getElementById('medicalModalTitle').innerText = t.medicalModalTitle;
      document.querySelector('label[for="fullName"]').innerText = t.fullName;
      document.querySelector('label[for="dob"]').innerText = t.dob;
      document.querySelector('label[for="bloodGroup"]').innerText = t.bloodGroup;
      document.querySelector('label[for="allergies"]').innerText = t.allergies;
      document.querySelector('label[for="medications"]').innerText = t.medications;
      document.querySelector('label[for="conditions"]').innerText = t.conditions;
      document.querySelector('label[for="emergencyContact"]').innerText = t.emergencyContact;
      document.getElementById('saveMedicalBtn').innerText = t.saveInfo;

      document.getElementById('sosModalTitle').innerText = t.sosModalTitle;
      document.querySelector('#sosOptionsModal button:nth-of-type(1)').innerText = t.policeService;
      document.querySelector('#sosOptionsModal button:nth-of-type(2)').innerText = t.ambulanceService;
      document.querySelector('#sosOptionsModal button:nth-of-type(3)').innerText = t.fireService;

      document.getElementById('contactsModalTitle').innerText = t.contactsModalTitle;
      document.querySelector('label[for="contact1Name"]').innerText = t.contact1Name;
      document.querySelector('label[for="contact1Email"]').innerText = t.contact1Email;
      document.querySelector('label[for="contact2Name"]').innerText = t.contact2Name;
      document.querySelector('label[for="contact2Email"]').innerText = t.contact2Email;
      document.getElementById('saveContactsBtn').innerText = t.saveContacts;
    }

    document.getElementById("languageSelect").addEventListener("change", (e) => {
      setLanguage(e.target.value);
    });

    setLanguage('en');

    function initMap() {
      navigator.geolocation.getCurrentPosition(position => {
        userLocation = [position.coords.longitude, position.coords.latitude];
        map = tt.map({
          key: apiKey,
          container: 'map',
          center: userLocation,
          zoom: 15
        });
        map.addControl(new tt.NavigationControl());
        new tt.Marker().setLngLat(userLocation).addTo(map);

        map.on('click', function (e) {
          const destination = [e.lngLat.lng, e.lngLat.lat];
          drawRouteTo(destination, true);
        });
      }, (error) => {
        console.error("Geolocation error:", error);
        alert("Unable to retrieve your location. Please enable location services.");
        userLocation = [77.2090, 28.6139];
        map = tt.map({
          key: apiKey,
          container: 'map',
          center: userLocation,
          zoom: 15
        });
        map.addControl(new tt.NavigationControl());
      });
    }

    function searchNearby(query) {
      if (!userLocation) return alert(translations[document.getElementById('languageSelect').value].locationNotAvailable);
      poiMarkers.forEach(m => m.remove());
      poiMarkers = [];
      const [lon, lat] = userLocation;
      fetch(`https://api.tomtom.com/search/2/poiSearch/${query}.json?key=${apiKey}&lat=${lat}&lon=${lon}&radius=10000`)
        .then(res => res.json())
        .then(data => {
          data.results.forEach(poi => {
            const marker = new tt.Marker().setLngLat([poi.position.lon, poi.position.lat]).addTo(map);
            poiMarkers.push(marker);
            marker.getElement().addEventListener('click', () => drawRouteTo([poi.position.lon, poi.position.lat], true));
          });
        });
    }

    function drawRouteTo(destination, showPopup = false) {
      if (routeLayer) {
        map.removeLayer('route');
        map.removeSource('route');
      }
      tt.services.calculateRoute({
        key: apiKey,
        locations: [userLocation, destination]
      }).then(response => {
        const geojson = {
          type: 'Feature',
          geometry: {
            type: 'LineString',
            coordinates: response.routes[0].legs[0].points.map(p => [p.longitude, p.latitude])
          }
        };
        map.addLayer({
          id: 'route',
          type: 'line',
          source: { type: 'geojson', data: geojson },
          paint: { 'line-color': '#1E88E5', 'line-width': 5 }
        });
        routeLayer = 'route';

        if (showPopup) {
          const summary = response.routes[0].summary;
          const minutes = Math.round(summary.travelTimeInSeconds / 60);
          const distance = (summary.lengthInMeters / 1000).toFixed(2);
          new tt.Popup({ offset: 35 })
            .setLngLat(destination)
            .setHTML(`<strong>üöó Route Info:</strong><br>üïí ${minutes} mins<br>üìè ${distance} km`)
            .addTo(map);
        }
      });
    }

    initMap();

    document.getElementById("sidebar-toggle").addEventListener("click", () => {
      document.getElementById("sidebar").classList.toggle("open");
    });

    document.getElementById("themeToggle").addEventListener("change", (e) => {
      document.body.classList.toggle("dark-mode", e.target.checked);
    });

    const sosModal = document.getElementById("sosOptionsModal");
    const closeSosModal = document.getElementById("closeSosModal");

    document.getElementById("quick-sos").addEventListener("click", () => {
      sosModal.style.display = "flex";
    });

    closeSosModal.onclick = () => sosModal.style.display = "none";

    function handleEmergency(serviceName, phoneNumber) {
      if (!userLocation) return alert(translations[document.getElementById('languageSelect').value].locationNotAvailable);
      fetch(`https://api.tomtom.com/search/2/reverseGeocode/${userLocation[1]},${userLocation[0]}.json?key=${apiKey}`)
        .then(res => res.json())
        .then(data => {
          const address = data.addresses[0]?.address?.freeformAddress || 'Unknown location';
          emailjs.send("service_s929gsa", "template_9jxocji", {
            to_name: "Admin",
            from_name: "SOSit App",
            message: `üö® Emergency Alert!\n\nService: ${serviceName}\nLocation:\n${address}\nLat: ${userLocation[1]}, Lon: ${userLocation[0]}`,
            reply_to: "sositapp@outlook.com"
          });
          alert(`${translations[document.getElementById('languageSelect').value].calling} ${serviceName}...`);
          window.location.href = `tel:${phoneNumber}`;
          sosModal.style.display = "none";
        });
    }

    const voiceToggle = document.getElementById("voiceToggle");
    let recognition;
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.continuous = true;
      recognition.interimResults = false;

      voiceToggle.addEventListener("change", () => {
        if (voiceToggle.checked) recognition.start();
        else recognition.stop();
      });

      recognition.onresult = (event) => {
        for (let i = event.resultIndex; i < event.results.length; ++i) {
          if (event.results[i].isFinal) {
            const transcript = event.results[i][0].transcript.toLowerCase();
            if (transcript.includes("sos") || transcript.includes("help") || transcript.includes("emergency")) {
              document.getElementById("quick-sos").click();
            }
          }
        }
      };
    } else {
      voiceToggle.disabled = true;
      voiceToggle.parentElement.innerHTML += " <small>(Not supported)</small>";
    }

    const modal = document.getElementById("medicalModal");
    const openBtn = document.getElementById("medicalBtn");
    const closeBtn = document.getElementById("closeModal");

    openBtn.onclick = () => modal.style.display = "flex";
    closeBtn.onclick = () => modal.style.display = "none";

    window.onload = function () {
      const fields = ['fullName', 'dob', 'bloodGroup', 'allergies', 'medications', 'conditions', 'emergencyContact'];
      fields.forEach(id => {
        const saved = localStorage.getItem(id);
        if (saved) document.getElementById(id).value = saved;
      });
      document.getElementById('contact1Name').value = localStorage.getItem('contact1Name') || '';
      document.getElementById('contact1Email').value = localStorage.getItem('contact1Email') || '';
      document.getElementById('contact2Name').value = localStorage.getItem('contact2Name') || '';
      document.getElementById('contact2Email').value = localStorage.getItem('contact2Email') || '';
    };

    document.getElementById("medicalForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const fields = ['fullName', 'dob', 'bloodGroup', 'allergies', 'medications', 'conditions', 'emergencyContact'];
      fields.forEach(id => {
        localStorage.setItem(id, document.getElementById(id).value);
      });
      document.getElementById("saved-message").innerText = translations[document.getElementById('languageSelect').value].infoSaved;
    });

    // --- Safe Me Feature Logic ---

    function updateSafeMeButton() {
      const t = translations[document.getElementById('languageSelect').value];
      safeMeBtn.innerHTML = isSafeMeActive ? `${t.safeMe} (Active)` : t.safeMe;
      safeMeBtn.style.backgroundColor = isSafeMeActive ? '#388e3c' : '#d32f2f';
      safeMeBtn.style.animation = isSafeMeActive ? 'glowing-background 2s infinite' : 'none';
      safeMeBtn.style.borderColor = isSafeMeActive ? '#2e7d32' : 'transparent';
    }

    safeMeBtn.addEventListener("click", () => {
      const t = translations[document.getElementById('languageSelect').value];
      if (isSafeMeActive) {
        clearInterval(safeMeIntervalId);
        isSafeMeActive = false;
        updateSafeMeButton();
        alert(t.safeMeDeactivated);
      } else {
        contactsModal.style.display = "flex";
        document.getElementById('contact1Name').value = localStorage.getItem('contact1Name') || '';
        document.getElementById('contact1Email').value = localStorage.getItem('contact1Email') || '';
        document.getElementById('contact2Name').value = localStorage.getItem('contact2Name') || '';
        document.getElementById('contact2Email').value = localStorage.getItem('contact2Email') || '';
      }
    });

    closeContactsModal.onclick = () => {
      contactsModal.style.display = "none";
      contactsSavedMessage.innerText = '';
    };

    contactsForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const contact1Name = document.getElementById('contact1Name').value;
      const contact1Email = document.getElementById('contact1Email').value;
      const contact2Name = document.getElementById('contact2Name').value;
      const contact2Email = document.getElementById('contact2Email').value;

      localStorage.setItem('contact1Name', contact1Name);
      localStorage.setItem('contact1Email', contact1Email);
      localStorage.setItem('contact2Name', contact2Name);
      localStorage.setItem('contact2Email', contact2Email);

      contactsSavedMessage.innerText = translations[document.getElementById('languageSelect').value].contactsSaved;

      activateSafeMe();
      contactsModal.style.display = "none";
    });

    function activateSafeMe() {
      const t = translations[document.getElementById('languageSelect').value];
      if (!userLocation) {
        alert(t.locationNotAvailable);
        return;
      }

      const contact1Email = localStorage.getItem('contact1Email');
      const contact2Email = localStorage.getItem('contact2Email');

      if (!contact1Email && !contact2Email) {
        alert("Please save at least one emergency contact email to use 'Safe Me'.");
        return;
      }

      isSafeMeActive = true;
      updateSafeMeButton();
      alert(t.safeMeActivated);

      sendSafeMeLocation();
      safeMeIntervalId = setInterval(sendSafeMeLocation, 120000);
    }

    function sendSafeMeLocation() {
      if (!userLocation) {
        console.warn("User location not available for Safe Me update.");
        return;
      }

      const contact1Name = localStorage.getItem('contact1Name') || 'Contact 1';
      const contact1Email = localStorage.getItem('contact1Email');
      const contact2Name = localStorage.getItem('contact2Name') || 'Contact 2';
      const contact2Email = localStorage.getItem('contact2Email');

      fetch(`https://api.tomtom.com/search/2/reverseGeocode/${userLocation[1]},${userLocation[0]}.json?key=${apiKey}`)
        .then(res => res.json())
        .then(data => {
          const address = data.addresses[0]?.address?.freeformAddress || 'Unknown location';
          const locationLink = `https://www.google.com/maps?q=$${userLocation[1]},${userLocation[0]}`;

          let message = `üö® Live Location Alert from SOSit!\n\nI've activated 'Safe Me'.\n\nMy current location is:\n${address}\nLat: ${userLocation[1]}, Lon: ${userLocation[0]}\n\nView on Map: ${locationLink}\n\nThis alert will be sent periodically.`;

          if (contact1Email) {
            emailjs.send("service_s929gsa", "template_9jxocji", {
              to_name: contact1Name,
              from_name: "SOSit App",
              to_email: contact1Email,
              message: message,
              reply_to: "sositapp@outlook.com"
            }).then(function(response) {
              console.log('Safe Me email sent to Contact 1:', response.status, response.text);
            }, function(error) {
              console.error('Failed to send Safe Me email to Contact 1:', error);
            });
          }

          if (contact2Email) {
            emailjs.send("service_s929gsa", "template_9jxocji", {
              to_name: contact2Name,
              from_name: "SOSit App",
              to_email: contact2Email,
              message: message,
              reply_to: "sositapp@outlook.com"
            }).then(function(response) {
              console.log('Safe Me email sent to Contact 2:', response.status, response.text);
            }, function(error) {
              console.error('Failed to send Safe Me email to Contact 2:', error);
            });
          }
        })
        .catch(error => {
          console.error("Error fetching address for Safe Me:", error);
          const locationLink = `https://www.google.com/maps?q=$${userLocation[1]},${userLocation[0]}`;
          let message = `üö® Live Location Alert from SOSit!\n\nI've activated 'Safe Me'.\n\nMy current location coordinates are:\nLat: ${userLocation[1]}, Lon: ${userLocation[0]}\n\nView on Map: ${locationLink}\n\nThis alert will be sent periodically.`;

          if (contact1Email) {
            emailjs.send("service_s929gsa", "template_9jxocji", {
              to_name: contact1Name,
              from_name: "SOSit App",
              to_email: contact1Email,
              message: message,
              reply_to: "sositapp@outlook.com"
            });
          }
          if (contact2Email) {
            emailjs.send("service_s929gsa", "template_9jxocji", {
              to_name: contact2Name,
              from_name: "SOSit App",
              to_email: contact2Email,
              message: message,
              reply_to: "sositapp@outlook.com"
            });
          }
        });
    }

    // --- WhatsApp Feature Logic ---
    function shareLocationOnWhatsApp() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const mapsLink = `https://www.google.com/maps?q=$${lat},${lng}`;
            const message = encodeURIComponent(`üö® I need help! This is my location: ${mapsLink}`);
            const whatsappUrl = `https://web.whatsapp.com/?text=${message}`;

            window.open(whatsappUrl, '_blank');
          },
          (error) => {
            alert(translations[languageSelect.value].locationNotAvailable);
            console.error("Error getting location for WhatsApp share: ", error);
          }
        );
      } else {
        alert(translations[languageSelect.value].locationNotAvailable);
      }
    }
    
    // Initial update of button text on page load
    document.addEventListener("DOMContentLoaded", () => {
      updateSafeMeButton();
    });

    window.onclick = (e) => {
      if (e.target == modal) modal.style.display = "none";
      if (e.target == sosModal) sosModal.style.display = "none";
      if (e.target == contactsModal) contactsModal.style.display = "none";
    };

    // Event listener for the new WhatsApp button
    document.getElementById('whatsappShareBtn').addEventListener('click', shareLocationOnWhatsApp);

    emailjs.init("jIeKH_a-eVdrTVNGA");
  </script>
  <script>
    (function () {
      if (!window.chatbase || window.chatbase("getState") !== "initialized") {
        window.chatbase = (...args) => {
          if (!window.chatbase.q) window.chatbase.q = [];
          window.chatbase.q.push(args);
        };
        window.chatbase = new Proxy(window.chatbase, {
          get(target, prop) {
            if (prop === "q") return target.q;
            return (...args) => target(prop, ...args);
          }
        });
      }
      const onLoad = function () {
        const script = document.createElement("script");
        script.src = "https://www.chatbase.co/embed.min.js";
        script.id = "-yLmCyXA4m_V1pQd17blW";
        script.domain = "www.chatbase.co";
        document.body.appendChild(script);
      };
      if (document.readyState === "complete") onLoad();
      else window.addEventListener("load", onLoad);
    })();
  </script>
</body>
</html>
